<launch>

  <!-- realsense camera launch file... -->
  <include file="$(find realsense2_camera)/launch/rs_camera.launch">
    <arg name="filters" value="pointcloud"/>
  </include> 


  <!-- start the aruco_ros node -->
  <arg name="markerId" default="26"/>
  <arg name="markerSize" default="0.08"/> <!-- in meter -->
  <arg name="marker_frame" default="marker_frame"/>
  <arg name="corner_refinement" default="LINES" /> <!-- NONE, HARRIS, LINES, SUBPIX -->
  <arg name="ref_frame" value="camera_link"/>
  <node pkg="aruco_ros" type="single" name="aruco_single">
      <remap from="/camera_info" to="/camera/color/camera_info" />
      <remap from="/image" to="/camera/color/image_raw" />
      <param name="image_is_rectified" value="True"/>
      <param name="marker_size" value="$(arg markerSize)"/>
      <param name="marker_id" value="$(arg markerId)"/>
      <param name="reference_frame" value="$(arg ref_frame)"/> <!-- frame in which the marker pose will be refered -->
      <param name="camera_frame" value="camera_color_optical_frame"/>
      <param name="marker_frame" value="marker_frame" />
      <param name="corner_refinement" value="$(arg corner_refinement)" />
  </node>


  <!-- start easy_handeye -->
  <arg name="namespace_prefix" default="my_eih_calib" />


  <include file="$(find easy_handeye)/launch/calibrate.launch" >
      <arg name="eye_on_hand" value="false" />
      <arg name="namespace_prefix" value="$(arg namespace_prefix)" />
      <arg name="tracking_base_frame" value="/camera_link"/>
      <arg name="tracking_marker_frame" value="/marker_frame"/>
      <arg name="robot_base_frame" value="/base_link" />
      <arg name="robot_effector_frame" value="/ee_link" />
  </include>


  <node name="image_view" pkg="image_view" type="image_view" respawn="false" output="screen">
      <remap from="image" to="/aruco_single/result" />
  </node>
  <!-- By: Casch -->
</launch>


